# Codeforces 赌局题笔记：均衡回报策略
原题：[Codeforces 1979 C](https://codeforces.com/problemset/problem/1979/C)

## 问题背景

* 有 (n) 个可能结果，每个结果有一个赔率 (k_i)
* 总预算为 (S)
* 希望无论哪个结果发生，得到的回报相同，记作 (R)
* 要求计算每个下注 (b_i)

---

## 核心公式

1. 保证回报相同：
   [
   b_i \cdot k_i = R \quad \Rightarrow \quad b_i = \frac{R}{k_i}
   ]

2. 总预算等于所有下注的和：
   [
   S = b_1 + b_2 + \dots + b_n = \sum_{i=1}^n b_i = \sum_{i=1}^n \frac{R}{k_i}
   ]

3. 解出 (R)：
   [
   R = \frac{S}{\sum_{i=1}^n \frac{1}{k_i}}
   ]

4. 最终下注公式：
   [
   b_i = \frac{R}{k_i} = \frac{S}{k_i \sum_{j=1}^n \frac{1}{k_j}}
   ]

---

## 代数技巧：求和与连乘

* 有时候倒数和可以写成分子分母统一的形式：
  [
  \sum_{i=1}^n \frac{1}{k_i} = \frac{\sum_{i=1}^n \prod_{j \ne i} k_j}{\prod_{j=1}^n k_j}
  ]
* 分子：去掉每个 (k_i) 后的乘积之和
* 分母：所有 (k_i) 的乘积
* 连乘符号 (\prod) 上下标可以省略，如果上下文已经明确

---

## 小例子

假设：

* (n = 3)
* (k_1 = 2, k_2 = 3, k_3 = 6)
* 总预算 (S = 120)

计算步骤：

1. 求倒数和：
   [
   \frac{1}{2} + \frac{1}{3} + \frac{1}{6} = 1
   ]
2. 求回报 (R)：
   [
   R = \frac{S}{\sum 1/k_i} = \frac{120}{1} = 120
   ]
3. 求每个下注：
   [
   b_1 = \frac{R}{k_1} = 60,\quad b_2 = 40,\quad b_3 = 20
   ]
4. 检验：
   [
   b_1 k_1 = 60\cdot 2 = 120,\quad b_2 k_2 = 40\cdot 3 = 120,\quad b_3 k_3 = 20\cdot 6 = 120
   ]
   ✅ 每个结果回报相同，总投入等于预算

---

## 核心理解

* **总预算 S** = 所有下注的和，不是回报和
* **R** = 希望得到的回报（与赔率有关）
* **∏ 符号**只是代数简写，用来统一分子分母表示形式，不影响解题逻辑
* 解题步骤：

  1. 用 (b_i k_i = R) 得到每个下注
  2. 用总预算求出 R
  3. 求出所有 (b_i)

---

## 注意事项

* 股市中不适用该公式，因为股市结果不是互斥且概率不固定
* 这个公式只适合**有限、互斥、概率已知的赌博/赔率问题**
* ∏ 和 ∑ 都是代数符号，理解它们的本质含义比死记符号更重要

